"use strict";(self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[]).push([[655],{655:(e,l,t)=>{t.r(l),t.d(l,{default:()=>k});var o=t(3673);const n={class:"q-pa-md wrapper_form--login"},a=(0,o._)("h2",{class:"text-h3 h3"},"Đăng nhập",-1),s={class:"button__register"},r=(0,o.Uk)("Đăng ký tài khoản");function u(e,l,t,u,i,m){const p=(0,o.up)("q-input"),c=(0,o.up)("router-link"),d=(0,o.up)("q-btn"),g=(0,o.up)("q-form");return(0,o.wg)(),(0,o.iD)("div",n,[a,(0,o.Wm)(g,{onSubmit:u.onSubmit,onReset:u.onReset,class:"q-gutter-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{filled:"",modelValue:u.email,"onUpdate:modelValue":l[0]||(l[0]=e=>u.email=e),label:"Tên đăng nhập","lazy-rules":"",rules:[e=>e&&e.length>0||"Hãy nhập thông tin"]},null,8,["modelValue","rules"]),(0,o.Wm)(p,{filled:"",modelValue:u.password,"onUpdate:modelValue":l[1]||(l[1]=e=>u.password=e),type:"password",label:"Nhập mật khẩu","lazy-rules":"",rules:[e=>e&&e.length>0||"Hãy nhập thông tin"]},null,8,["modelValue","rules"]),(0,o._)("p",s,[(0,o.Wm)(c,{to:"/register"},{default:(0,o.w5)((()=>[r])),_:1})]),(0,o._)("div",null,[(0,o.Wm)(d,{label:"Đăng nhập",type:"submit",color:"primary"}),(0,o.Wm)(d,{label:"Hủy",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])}t(2100);var i=t(8825),m=t(1959),p=t(5474),c=t(9582);const d={name:"LoginPage",components:{},setup(){const e=(0,i.Z)(),l=(0,m.iH)(null),t=(0,m.iH)(null),n=(0,c.tv)();(0,o.wF)((()=>{if(!localStorage.getItem("user"))return localStorage.clear();const{id:e,uid:l,name:t,email:o}=JSON.parse(localStorage.getItem("user"));e&&l&&t&&o&&n.push({path:"chat"})}));const a=async()=>{const{data:o}=await p.api.post("/login",{email:l.value,password:t.value});if(o&&null!==o&&void 0!==o&&o.data){const{user:l,token:t}=o.data;l&&t&&(localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(l)),e.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Login success"}),n.push({path:"chat"}))}else e.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"Login failed"})};return{email:l,password:t,onSubmit:a,onReset(){l.value=null,t.value=null}}},methods:{}};var g=t(4260),h=t(8689),f=t(7216),y=t(522),w=t(7518),b=t.n(w);const _=(0,g.Z)(d,[["render",u]]),k=_;b()(d,"components",{QForm:h.Z,QInput:f.Z,QBtn:y.Z})}}]);